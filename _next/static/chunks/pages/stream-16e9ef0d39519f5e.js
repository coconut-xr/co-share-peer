(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245],{3349:function(e,a,n){"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var a,n=1,t=arguments.length;n<t;n++)for(var s in a=arguments[n])Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);return e}).apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.connectPeer=void 0;var c=n(1687),o=n(8751),r=s(n(5232)),p=n(4712),i=n(2938);a.connectPeer=function(e,a,n,s,m,k){return new Promise((function(N){var l=new r.default(e),u=new p.Subscription,d=function(){u.unsubscribe(),l.destroy(),s()};return u.add(a().pipe((0,i.tap)((function(e){return l.signal(e)}))).subscribe()),u.add((0,p.fromEvent)(l,"close").pipe((0,i.tap)(d)).subscribe()),u.add((0,p.fromEvent)(l,"error").pipe((0,i.tap)(d)).subscribe()),u.add((0,p.fromEvent)(l,"signal").pipe((0,i.tap)(n)).subscribe()),u.add((0,p.fromEvent)(l,"connect").pipe((0,i.tap)((function(){var e={disconnect:d,publish:function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return l.send((0,o.encode)(e))},receive:function(){return(0,p.fromEvent)(l,"data",(function(e){return e})).pipe((0,i.map)((function(e){return(0,o.decode)(e)})))},userData:t(t({},null==m?{}:m(l)),{peer:l})},a=k.link(c.RootStoreDefaultLinkId,e);N([e,a])}))).subscribe()),l}))}},8077:function(e,a,n){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,a,n,t){void 0===t&&(t=n),Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[n]}})}:function(e,a,n,t){void 0===t&&(t=n),e[t]=a[n]}),s=this&&this.__exportStar||function(e,a){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(a,n)||t(a,e,n)};Object.defineProperty(a,"__esModule",{value:!0}),s(n(2248),a),s(n(6448),a)},6448:function(e,a,n){"use strict";var t=this&&this.__createBinding||(Object.create?function(e,a,n,t){void 0===t&&(t=n),Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[n]}})}:function(e,a,n,t){void 0===t&&(t=n),e[t]=a[n]}),s=this&&this.__exportStar||function(e,a){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(a,n)||t(a,e,n)};Object.defineProperty(a,"__esModule",{value:!0}),s(n(9992),a),s(n(6897),a)},6897:function(e,a,n){"use strict";var t=this&&this.__spreadArray||function(e,a,n){if(n||2===arguments.length)for(var t,s=0,c=a.length;s<c;s++)!t&&s in a||(t||(t=Array.prototype.slice.call(a,0,s)),t[s]=a[s]);return e.concat(t||Array.prototype.slice.call(a))};Object.defineProperty(a,"__esModule",{value:!0}),a.useIncommingPeerStreams=a.useIncommingPeerStreamsChange=void 0;var s=n(7378),c=n(4712),o=n(2938);function r(e,a){var n=(0,s.useMemo)((function(){return{ref:[]}}),[e]);(0,s.useEffect)((function(){var s=function(e){n.ref=e,a(n.ref)},r=(0,c.fromEvent)(e,"stream",(function(e){return e})).pipe((0,o.mergeMap)((function(e){s(t(t([],n.ref,!0),[e],!1));var a=e.getTracks();return(0,c.combineLatest)(a.map((function(e){return(0,c.fromEvent)(e,"mute")}))).pipe((0,o.take)(1),(0,o.tap)((function(){a.forEach((function(e){return e.stop()})),s(n.ref.filter((function(a){return a!=e})))})))}))).subscribe();return function(){return r.unsubscribe()}}),[e,a,n])}a.useIncommingPeerStreamsChange=r,a.useIncommingPeerStreams=function(e){var a=(0,s.useState)([]),n=a[0];return r(e,a[1]),n}},9992:function(e,a,n){"use strict";var t=this&&this.__spreadArray||function(e,a,n){if(n||2===arguments.length)for(var t,s=0,c=a.length;s<c;s++)!t&&s in a||(t||(t=Array.prototype.slice.call(a,0,s)),t[s]=a[s]);return e.concat(t||Array.prototype.slice.call(a))};Object.defineProperty(a,"__esModule",{value:!0}),a.useOutgoingPeerStream=void 0;var s=n(7378);a.useOutgoingPeerStream=function(e,a){var n=(0,s.useRef)([]);(0,s.useEffect)((function(){return function(){if(!e.destroyed)for(var a=0,t=n.current;a<t.length;a++){var s=t[a];e.removeStream(s)}n.current=[]}}),[e]),(0,s.useEffect)((function(){for(var s=0,c=a;s<c.length;s++){var o=c[s];n.current.includes(o)||e.addStream(o)}for(var r=0,p=n.current;r<p.length;r++){var i=p[r];a.includes(i)||e.removeStream(i)}n.current=t([],a,!0)}),[a,e])}},2248:function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.usePeerConnection=void 0;var t=n(1687),s=n(7378),c=n(4487),o=n(3349),r=Symbol();a.usePeerConnection=function(e,a,n,p,i,m){void 0===m&&(m=t.rootStore);var k=(0,c.suspend)((function(){return(0,o.connectPeer)(e,a,n,p,i,m)}),[e,a,n,i,m,r]),N=k[0],l=k[1];return(0,s.useEffect)((function(){return function(){return l.close()}}),[l]),N}},2875:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stream",function(){return n(4325)}])},6673:function(e,a,n){"use strict";n.d(a,{$:function(){return o}});var t=n(4246),s=n(5675),c=function(e){var a=e.src;return"/co-share-peer".concat(a)};function o(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-grow-1"}),(0,t.jsx)("footer",{className:"bg-light",children:(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-around p-3 container-lg",children:[(0,t.jsxs)("a",{target:"_blank",href:"https://github.com/cocoss-org/co-share-peer",className:"mx-2 text-black d-flex flex-row align-items-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-github mx-2",viewBox:"0 0 16 16",children:(0,t.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})}),(0,t.jsx)("span",{className:"h5 mb-0",children:"Github"})]}),(0,t.jsx)("a",{className:"d-flex mx-2",target:"_blank",href:"https://www.coconut-xr.com/",children:(0,t.jsx)(s.default,{loader:c,layout:"fixed",width:170,height:40,src:"/powered-by.svg"})})]})})]})}},2236:function(e,a,n){"use strict";n.d(a,{h:function(){return r}});var t=n(4246),s=n(1664),c=n(7378),o=[{title:"Counter",url:"/counter"},{title:"Stream",url:"/stream"}];function r(e){var a=e.selectedIndex,n=(0,c.useState)(!1),r=n[0],p=n[1];return(0,t.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsx)(s.default,{href:"/",passHref:!0,children:(0,t.jsx)("a",{className:"navbar-brand",children:"co-share-peer examples"})}),(0,t.jsx)("button",{className:"navbar-toggler",type:"button",onClick:function(){return p(!r)},"data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,t.jsx)("span",{className:"navbar-toggler-icon"})}),(0,t.jsx)("div",{className:"align-self-flex-end navbar-collapse ".concat(r?"":"collapse"),children:(0,t.jsx)("ul",{className:"navbar-nav",children:o.map((function(e,n){var c=e.title,o=e.url;return(0,t.jsx)("li",{className:"nav-item",children:n===a?(0,t.jsx)("span",{style:{cursor:"pointer"},className:"active nav-link",children:c}):(0,t.jsx)(s.default,{href:o,passHref:!0,children:(0,t.jsx)("a",{className:"nav-link",children:c})})},c)}))})})]})})}},4325:function(e,a,n){"use strict";n.r(a),n.d(a,{Environment:function(){return L},default:function(){return A}});var t=n(4246),s=n(8077),c=n(7378),o=n(9495),r=n(1687),p=n(8287),i=n(9663),m=n(4975),k=n(2802),N=n(1389),l=n(9306),u=n(455),d=n(9646),g=n(4881),b=n(733),j=n.n(b);function O(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function f(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(a){O(e,a,n[a])}))}return e}function v(e,a){if(null==e)return{};var n,t,s=function(e,a){if(null==e)return{};var n,t,s={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(t=0;t<c.length;t++)n=c[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function y(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var n=[],t=!0,s=!1,c=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done)&&(n.push(o.value),!a||n.length!==a);t=!0);}catch(p){s=!0,c=p}finally{try{t||null==r.return||r.return()}finally{if(s)throw c}}return n}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(e){return function(e){if(Array.isArray(e)){for(var a=0,n=new Array(e.length);a<e.length;a++)n[a]=e[a];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e){var a=e.unifier,n=e.device,s=e.OffIcon,o=e.OnIcon,r=e.setStream,i=v(e,["unifier","device","OffIcon","OnIcon","setStream"]),m=(0,c.useState)(!1),k=m[0],N=m[1];if(k){var l=function(){return N(!1)},u=[n,a];return(0,t.jsxs)(c.Suspense,{fallback:(0,t.jsx)(j(),{className:i.className,width:35,height:35,type:"spin",color:"#fff"}),children:[(0,t.jsx)(w,{request:function(e){return(0,p.requestMediaDeviceStream)(e)},onResult:function(e,a){r(e),null==e?(console.error(a),N(!1)):e.addEventListener("inactive",l)},cleanUp:function(e){null!=e&&((0,p.closeStream)(e),e.removeEventListener("inactive",l)),r(void 0)},parameters:u}),(0,t.jsx)(s,f({},i,{onClick:function(){return N(!1)}}))]})}return(0,t.jsx)(o,f({},i,{onClick:function(){return N(!0)}}))}function w(e){var a=e.onResult,n=e.parameters,t=e.request,s=e.cleanUp,o=y((0,g.suspend)((function(){return t.apply(void 0,h(n)).then((function(e){return[e,void 0]})).catch((function(e){return[void 0,e]}))}),n),2),r=o[0],p=o[1];return(0,c.useLayoutEffect)((function(){return a(r,p),function(){s(r,p),(0,g.clear)(n)}}),n),null}function x(e){var a=e.audioInput,n=e.screenCapture,s=e.setAudioStream,c=e.setScreenStream,o=e.setVideoStream,r=e.videoInput,p=e.unifier;return(0,t.jsxs)("div",{className:"d-flex flex-row align-items-center m-3 px-2 bg-dark rounded-pill",children:[a&&(0,t.jsx)(S,{unifier:p,fontSize:"large",className:"m-3 pointer",htmlColor:"#fff",width:300,height:300,OffIcon:i.Z,OnIcon:m.Z,device:a,setStream:s}),r&&(0,t.jsx)(S,{unifier:p,fontSize:"large",className:"m-3 pointer",htmlColor:"#fff",width:300,height:300,OffIcon:k.Z,OnIcon:N.Z,device:r,setStream:o}),n&&(0,t.jsx)(S,{unifier:p,fontSize:"large",className:"m-3 pointer",htmlColor:"#fff",width:300,height:300,OffIcon:l.Z,OnIcon:u.Z,device:n,setStream:c})]})}function C(e){var a=e.stream,n=(0,p.useStreamType)(a),s=(0,c.useRef)(null);switch((0,c.useLayoutEffect)((function(){null!=s.current&&(s.current.srcObject=a,s.current.play())}),[a]),n){case p.StreamType.AUDIO:return(0,t.jsx)("audio",{ref:s});case p.StreamType.VIDEO:return(0,t.jsx)("video",{playsInline:!0,className:"flex-grow-1 flex-basis-0",ref:s});default:return s.current=null,(0,t.jsx)(d.Z,{})}}var P=n(2236),_=n(6673),I=n(3905);function M(e,a){if(null==e)return{};var n,t,s=function(e,a){if(null==e)return{};var n,t,s={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(t=0;t<c.length;t++)n=c[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var E={};function D(e){var a=e.components,n=M(e,["components"]);return(0,I.kt)("wrapper",Object.assign({},E,n,{components:a,mdxType:"MDXLayout"}),(0,I.kt)("h1",null,"Stream Example"),(0,I.kt)("p",null,"We establish a WebRTC connection using ",(0,I.kt)("a",Object.assign({parentName:"p"},{href:"https://github.com/feross/simple-peer"}),"simple-peer")," and use the media channels to stream the microphone/camera/screen.\nThis user-media is captured with the help of the ",(0,I.kt)("a",Object.assign({parentName:"p"},{href:"https://github.com/cocoss-org/co-media"}),"co-media")," library."),(0,I.kt)("p",null,(0,I.kt)("em",{parentName:"p"},"If you use chrome, you can verify the webrtc connection under chrome://webrtc-internals/.")),(0,I.kt)("h1",null,"Source Code"),(0,I.kt)("p",null,(0,I.kt)("a",Object.assign({parentName:"p"},{href:"https://github.com/cocoss-org/co-share-peer/blob/master/examples/pages/stream.tsx"}),(0,I.kt)("inlineCode",{parentName:"a"},"stream.tsx"))),(0,I.kt)("pre",Object.assign({},{className:"language-typescript"}),(0,I.kt)("code",Object.assign({parentName:"pre"},{className:"language-typescript"}),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," optionsC1",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Options")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    initiator",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token boolean"}),"true"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," optionsC2",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Options")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword module"}),"export")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"function")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"Index")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"c1Root",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," receiveFromC1",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," sendToC1",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," c2Root",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," receiveFromC2",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," sendToC2",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"useMemo"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," toC1 ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"Subject"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token builtin"}),"any"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),">")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," toC2 ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"Subject"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token builtin"}),"any"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),">")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword control-flow"}),"return")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"RootStore")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token known-class-name class-name"}),"Map")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," toC2",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"val",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token builtin"}),"any"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," toC1",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token method function property-access"}),"next"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"val",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"RootStore")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token known-class-name class-name"}),"Map")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," toC1",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"val",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token builtin"}),"any"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," toC2",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token method function property-access"}),"next"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"val",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword control-flow"}),"return")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"global",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token property-access"}),"window")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"!=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword null nil"}),"null")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"&&")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n                ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Suspense")," fallback",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Loading ..."'),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"MasterCounterExamplePage"),"\n                            rootStore",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"c1Root",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                            options",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"optionsC1",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                            receiveSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"receiveFromC2",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                            sendSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"sendToC2",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Suspense"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"div className",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"border flex-basis-0 border-dark h-100"')," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Suspense")," fallback",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Loading ..."'),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"SlaveCounterExamplePage"),"\n                            rootStore",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"c2Root",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                            options",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"optionsC2",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                            receiveSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"receiveFromC1",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                            sendSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"sendToC1",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Suspense"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," masterOptions",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Options")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    initiator",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token boolean"}),"true"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"function")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"empty"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"void")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token comment"}),"//empty"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"function")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"MasterCounterExamplePage")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    receiveSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    sendSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    rootStore",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rootStore",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"RootStore"),"\n    options",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Options"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"receiveSignal"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Observable"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token builtin"}),"any"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"sendSignal"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"data",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token builtin"}),"any"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"void"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," connection ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"usePeerConnection"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"masterOptions",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," receiveSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," sendSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," empty",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," rootStore",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword control-flow"}),"return")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"StreamPage")," unifier",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token number"}),"0"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," connection",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"connection",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," slaveOptions",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Options")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"function")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"SlaveCounterExamplePage")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    receiveSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    sendSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    rootStore",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rootStore",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"RootStore"),"\n    options",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Options"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"receiveSignal"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Observable"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token builtin"}),"any"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function-variable function"}),"sendSignal"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"data",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token builtin"}),"any"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"void"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," connection ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"usePeerConnection"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"slaveOptions",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," receiveSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," sendSignal",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," empty",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," rootStore",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword control-flow"}),"return")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"StreamPage")," unifier",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token number"}),"1"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," connection",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"connection",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"function")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"StreamPage")),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," unifier",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," connection ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," unifier",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token builtin"}),"number"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")," connection",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Connection")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"outgroundAudioStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," setOutgroundAudioStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token generic-function"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token function"}),"useState"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token generic class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"MediaStream")," ",(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"|")," ",(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),">"))),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"outgroundVideoStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," setOutgroundVideoStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token generic-function"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token function"}),"useState"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token generic class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"MediaStream")," ",(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"|")," ",(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),">"))),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"outgroundScreenStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," setOutgroundScreenStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token generic-function"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token function"}),"useState"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token generic class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token maybe-class-name"}),"MediaStream")," ",(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"|")," ",(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),">"))),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," outgoingStreams ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"useMemo"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"outgroundAudioStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," outgroundVideoStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," outgroundScreenStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token method function property-access"}),"filter"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"filterNull",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"outgroundAudioStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," outgroundVideoStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," outgroundScreenStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," devices ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"useMediaDevices"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," audioInput ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"useSelectDefaultMediaDevice"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"audioinput"'),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," devices",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," videoInput ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"useSelectDefaultMediaDevice"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"videoinput"'),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," devices",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," screenCapture ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"useSelectDefaultMediaDevice"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"screencapture"'),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," devices",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," incommingStreams ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"useIncommingPeerStreams"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"connection",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token property-access"}),"userData"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token property-access"}),"peer"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token function"}),"useOutgoingPeerStream"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"connection",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token property-access"}),"userData"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token property-access"}),"peer"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," outgoingStreams",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword control-flow"}),"return")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"div className",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"d-flex flex-grow-1 flex-column overflow-hidden flex-basis-0"'),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"div className",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"d-flex flex-grow-1 flex-column overflow-hidden justify-content-around overflow-hidden"'),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"incommingStreams",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token method function property-access"}),"map"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"stream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token arrow operator"}),"=>")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n                    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"Stream")," key",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"stream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token property-access"}),"id"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," stream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"stream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"div",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"div className",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token string"}),'"d-flex flex-row align-items-center justify-content-center"'),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n                ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token maybe-class-name"}),"MediaDevicesControl"),"\n                    unifier",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"unifier",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                    audioInput",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"audioInput",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                    videoInput",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"videoInput",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                    screenCapture",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"screenCapture",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                    setAudioStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"setOutgroundAudioStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                    setVideoStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"setOutgroundVideoStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                    setScreenStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"setOutgroundScreenStream",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n                ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n            ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"div",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n        ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"/"),"div",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"function")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token generic-function"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token function"}),"filterNull"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token generic class-name"}),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),"<"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token constant"}),"T"),(0,I.kt)("span",Object.assign({parentName:"span"},{className:"token operator"}),">"))),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"val",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token constant"}),"T")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"|")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword nil"}),"undefined"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),":")," val ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"is")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token constant"}),"T")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword control-flow"}),"return")," val ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token operator"}),"!=")," ",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token keyword null nil"}),"null"),"\n",(0,I.kt)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n")))}function A(){return(0,t.jsxs)("div",{className:"d-flex flex-column fullscreen",children:[(0,t.jsx)(P.h,{selectedIndex:1}),(0,t.jsxs)("div",{className:"d-flex flex-column justify-content-stretch container-lg",children:[(0,t.jsx)("div",{style:{height:"calc(90vh - 176px)"},className:"d-flex flex-row-responsive border mt-3",children:(0,t.jsx)(L,{})}),(0,t.jsx)("div",{className:"p-3 flex-basis-0 flex-grow-1",children:(0,t.jsx)(D,{})})]}),(0,t.jsx)(_.$,{})]})}D.isMDXComponent=!0;var T={initiator:!0},R={};function L(){var e=(0,c.useMemo)((function(){var e=new o.x,a=new o.x;return[new r.RootStore(new Map),function(){return a},function(a){return e.next(a)},new r.RootStore(new Map),function(){return e},function(e){return a.next(e)}]}),[]),a=e[0],s=e[1],p=e[2],i=e[3],m=e[4],k=e[5];return(0,t.jsx)(t.Fragment,{children:null!=n.g.window&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Suspense,{fallback:"Loading ...",children:(0,t.jsx)(Z,{rootStore:a,options:T,receiveSignal:m,sendSignal:k})}),(0,t.jsx)("div",{className:"border flex-basis-0 border-dark h-100"}),(0,t.jsx)(c.Suspense,{fallback:"Loading ...",children:(0,t.jsx)(X,{rootStore:i,options:R,receiveSignal:s,sendSignal:p})})]})})}var V={initiator:!0};function F(){}function Z(e){var a=e.receiveSignal,n=e.sendSignal,c=e.rootStore,o=(0,s.usePeerConnection)(V,a,n,F,void 0,c);return(0,t.jsx)(q,{unifier:0,connection:o})}var z={};function X(e){var a=e.receiveSignal,n=e.sendSignal,c=e.rootStore,o=(0,s.usePeerConnection)(z,a,n,F,void 0,c);return(0,t.jsx)(q,{unifier:1,connection:o})}function q(e){var a=e.unifier,n=e.connection,o=(0,c.useState)(void 0),r=o[0],i=o[1],m=(0,c.useState)(void 0),k=m[0],N=m[1],l=(0,c.useState)(void 0),u=l[0],d=l[1],g=(0,c.useMemo)((function(){return[r,k,u].filter(B)}),[r,k,u]),b=(0,p.useMediaDevices)(),j=(0,p.useSelectDefaultMediaDevice)("audioinput",b),O=(0,p.useSelectDefaultMediaDevice)("videoinput",b),f=(0,p.useSelectDefaultMediaDevice)("screencapture",b),v=(0,s.useIncommingPeerStreams)(n.userData.peer);return(0,s.useOutgoingPeerStream)(n.userData.peer,g),(0,t.jsxs)("div",{className:"d-flex flex-grow-1 flex-column overflow-hidden flex-basis-0",children:[(0,t.jsx)("div",{className:"d-flex flex-grow-1 flex-column overflow-hidden justify-content-around overflow-hidden",children:v.map((function(e){return(0,t.jsx)(C,{stream:e},e.id)}))}),(0,t.jsx)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:(0,t.jsx)(x,{unifier:a,audioInput:j,videoInput:O,screenCapture:f,setAudioStream:i,setVideoStream:N,setScreenStream:d})})]})}function B(e){return null!=e}},471:function(){},1632:function(){}},function(e){e.O(0,[167,564,861,774,888,179],(function(){return a=2875,e(e.s=a);var a}));var a=e.O();_N_E=a}]);